<html>
  <head>
    <link rel="stylesheet" href="style.css" />
    <title>Form Submission</title>
  </head>
  <body>
    <nav>
      <ul class="nav-item">
        <li>
          <img src="logo-dumbways.png" alt="logo-dumbways" id="logo" />
        </li>
        <li><a href="#">Home</a></li>
        <li><a href="#">Blog</a></li>
        <li class="contactme-button">
          <button>Contact Me</button>
        </li>
      </ul>
    </nav>
    <main>
      <div class="contact-form">
        <form id="contactForm" name="contactForm" action="">
          <label for="nama">Nama</label>
          <input type="text" name="nama" id="nama" />
          <label for="email">Email</label>
          <input type="text" name="email" id="email" />
          <label for="phone">Phone Number</label>
          <input type="text" name="phone" id="phone" />
          <label for="subject">Subject</label>
          <select name="subject" id="subject">
            <option value=""></option>
            <option value="Let's Talk">Let's Talk</option>
            <option value="Let's Meet">Let's Meet</option>
          </select>
          <label for="pesan">Your Message</label>
          <textarea name="pesan" id="pesan" cols="30" rows="10"></textarea>
          <button type="submit">Submit</button>
        </form>
      </div>
    </main>

    <script>
      let contactFormNode = document.getElementById("contactForm");
      let namaNode = document.getElementById("nama");
      let emailNode = document.getElementById("email");
      let phoneNode = document.getElementById("phone");
      let subjectNode = document.getElementById("subject");
      let pesanNode = document.getElementById("pesan");

      // console.log(contactFormNode);

      contactFormNode.addEventListener("submit", (e) => {
        e.preventDefault();

        // console.log(namaNode.value);
        // console.log(emailNode.value);
        // console.log(phoneNode.value);
        // console.log(subjectNode.value);
        // console.log(pesanNode.value);

        let error = {};
        // Cek inputan, jika kosong maka error bernilai true
        namaNode.value.trim() == ""
          ? (error.nama = true)
          : (error.nama = false);
        emailNode.value.trim() == ""
          ? (error.email = true)
          : (error.email = false);
        phoneNode.value.trim() == ""
          ? (error.phone = true)
          : (error.phone = false);
        subjectNode.value.trim() == ""
          ? (error.subject = true)
          : (error.subject = false);
        pesanNode.value.trim() == ""
          ? (error.pesan = true)
          : (error.pesan = false);

        // Cek semua error, dan ambil tindakan sesuai kondisi error tersebut
        // error.nama || error.email || error.phone || error.subject || error.pesan
        //   ? alert("Semua Inputan Harus Diisi !")
        //   : alert(
        //       `Name : ${namaNode.value} \nEmail : ${emailNode.value} \nPhone number : ${phoneNode.value} \nSubject : ${subjectNode.value} \nMessage : ${pesanNode.value}`
        //     );
        error.nama || error.email || error.phone || error.subject || error.pesan
          ? alert("Semua Inputan Harus Diisi !")
          : sendMail();
      });

      // Membuat fungsi untuk mengirim email
      const sendMail = () => {
        // menyimpan dulu hasil data dari form ke dalam variabel, baru dipanggil saaat membuka mailto
        let subject = subjectNode.value;
        let body = `Hello my name ${namaNode.value.trim()}, ${subjectNode.value.trim()}, ${pesanNode.value.trim()}`;
        window.open(
          `mailto:sidikrudini16@gmail.com?subject=${subject}&body=${body}`
        );

        // menuliskan langsung subject dan body dengan menggunakan encodeURI
        // window.open(
        //   `mailto:sidikrudini16@gmail.com?subject=${encodeURI(
        //     subjectNode.value
        //   )}&body=${encodeURI(
        //     "Hello my name " +
        //       namaNode.value.trim() +
        //       ", " +
        //       subjectNode.value.trim() +
        //       ", " +
        //       pesanNode.value.trim()
        //   )}`
        // );
      };
    </script>
  </body>
</html>
